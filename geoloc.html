<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>HTML5 Geolocation API</title>

<script type="text/javascript">
const id = navigator.geolocation.watchPosition(position => {
  document.body.querySelector('.oldCoord > .oldLatitude').textContent = document.body.querySelector('.currentCoord > .currentLatitude').textContent;
  document.body.querySelector('.oldCoord > .oldLongitude').textContent = document.body.querySelector('.currentCoord > .currentLongitude').textContent;
  document.body.querySelector('.currentCoord > .currentLatitude').textContent =`${position.coords.latitude}`;
  document.body.querySelector('.currentCoord > .currentLongitude').textContent =`${position.coords.longitude}`;
  console.log(position);

  const oldLat = Number(document.body.querySelector('.oldCoord > .oldLatitude').textContent);
  const oldLong = Number(document.body.querySelector('.oldCoord > .oldLongitude').textContent);
  const currentLat = Number(document.body.querySelector('.currentCoord > .currentLatitude').textContent);
  const currentLong = Number(document.body.querySelector('.currentCoord > .currentLongitude').textContent);

  let distanceBetweenPoints = (oldLat - currentLat) + (oldLong - currentLong);
  const oldDistance = Number(document.body.querySelector('.distance > .distanceinmetres').textContent);
  if (Math.abs(distanceBetweenPoints) < 1) {
    distanceBetweenPoints *= 1000;
  }
  const currentDistance = oldDistance + distanceBetweenPoints;

  document.body.querySelector('.distance > .distanceinmetres').textContent = currentDistance;

  console.log(oldLat);
  console.log(oldLong);
  console.log(currentLat);
  console.log(currentLong);
  console.log(distanceBetweenPoints);


})
</script>

</head>
 
<body>
  <div class="oldCoord">
    <h2>Старые координаты</h2>
    <p class="oldLatitude">0</p>
    <p class="oldLongitude">0</p>
  </div>
  <div class="currentCoord">
    <h2>Текущие координаты</h2>
    <p class="currentLatitude">0</p>
    <p class="currentLongitude">0</p>
  </div>
  <div class='distance'>
    <h2>Расстояние</h2>
    <p class="distanceinmetres">0 </p>
    <p>метров</p>
  </div>
</body>
</html>